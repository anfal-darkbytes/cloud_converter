{% extends 'base.html' %}
{% block cloudConverterBody %}
<form method="POST" enctype="multipart/form-data">

 {% csrf_token %}
<!---Main Body-->
<div class="bg-gradient-to-r from-[#A92655] to-[#FD8D67] h-65 justify-between flex px-100 items-center">
    <!--Details-->
    <div>
        <h1 class="text-white font-bold text-3xl pb-2">File Converter</h1>
        <p class="text-white text-wrap w-xl">CloudConvert is an online file converter. We support nearly all audio, video, document, ebook, archive, image, spreadsheet, and presentation formats. To get started, use the button below and select files to convert from your computer.</p>
    </div>

    <!--Options-->
    <div class="flex self-center text-white items-center px-20">
        convert
        <label>
            <select class="px-6 mx-4 py-4 border border-[#f2f2f2] rounded-md text-[14px]" name="from_file"
                    id="from_file" required>
                <option class="text-black font-bold" value="" disabled selected hidden>. . .</option>
                <option class="text-black" value="png">PNG</option>
                <option class="text-black" value="png">GIF</option>
                <option class="text-black" value="pdf">PDF</option>
                <option class="text-black" value="jpg">JPG</option>
                <option class="text-black" value="jpeg">JPG</option>
            </select>
        </label>
        to
        <label>
            <select class="px-6 mx-4 py-4 border border-[#f2f2f2] rounded-md text-[14px]" name="to_file" id="to_file" required>
                <option class="text-black font-bold" value="" disabled selected hidden>. . .</option>
                <option class="text-black" value="png">PNG</option>
                <option class="text-black" value="pdf">PDF</option>
                <option class="text-black" value="gif">GIF</option>
                <option class="text-black" value="jpg">JPG</option>
                <option class="text-black" value="jpeg">JPEG</option>
            </select>
        </label>
    </div>
</div>


<!--Select File Button-->
<div class="px-[40%] flex gap-2">
    <input type="file" id="fileUpload" class="hidden" name="file_picked" required>
    <label for="fileUpload" class="flex items-center gap-4  text-[#A92655] border border-[#A92655] text-xl px-4 py-4 w-60
    justify-self-center justify-arround
    border rounded-md my-4
    cursor-pointer hover:bg-[#A92655] hover:text-white transition">
        <i class="fa-regular fa-file pl-10 pr-6"></i>
        Select File
    </label>
    <button type="submit" id='button1'
            class="flex items-center gap-2 self-items-center text-[#A92655] border border-[#A92655]
    text-xl w-30 pl-6 justify-self-center border rounded-md my-4 cursor-pointer hover:bg-[#A92655] hover:text-white transition">
        Submit
    </button>
</div>


</form>


<!--Bottom Body Detail Boxes-->
{% include 'converter_details.html' %}

    <script>
    function postRequest() {
    let fromFile = document.getElementById('from_file').value;
    let toFile = document.getElementById('to_file').value;
    let fileInput = document.getElementById('fileUpload').files[0];
    let csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    let formData = new FormData();
    formData.append('from_file', fromFile);
    formData.append('to_file', toFile);
    formData.append('file_picked', fileInput);

    fetch("{% url 'home' %}", {
        method: "POST",
        headers: {
            "X-CSRFToken": csrfToken,
        },
        body: formData
    })}
        {#.then(function(response) {#}
        {#return response.json();#}
      {# }).then(function(data){#}
        {#console.log(data);#}
        {#console.log(data.data.from);#}
        {#document.getElementById('from_file').value = data.data.from;#}
        {#document.getElementById('to_file').value = data.data.to;#}
      {# }).catch(error => error)}#}
    </script>
{% endblock %}